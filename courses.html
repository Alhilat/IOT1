<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-g" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ØªØ®ØµØµ Ø¥Ù†ØªØ±Ù†Øª Ø§Ù„Ø£Ø´ÙŠØ§Ø¡</title>
  <style>
    :root{
      --bg-dark:#0a0e1a;
      --bg-medium:#0f1724;
      --card-bg:#131a2b;
      --card-hover:#182033;
      --text-primary:#e8f0f8;
      --text-secondary:#9ca3af;
      --accent:#06b6d4;
      --accent-hover:#0891b2;
      --success:#10b981;
      --warning:#f59e0b;
      --border:rgba(255,255,255,0.06);
      --shadow:rgba(0,0,0,0.4);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:Almarai,'Segoe UI',Tahoma,sans-serif;
      background:linear-gradient(135deg,#0a0e1a 0%,#0f1724 50%,#071b2a 100%);
      color:var(--text-primary);
      min-height:100vh;
      line-height:1.6;
    }
    .container{max-width:1200px;margin:0 auto;padding:24px}
    
    /* Header */
    header{
      background:linear-gradient(135deg,rgba(6,182,212,0.1),rgba(6,182,212,0.05));
      border-radius:16px;
      padding:28px;
      margin-bottom:28px;
      border:1px solid var(--border);
      backdrop-filter:blur(10px);
    }
    .header-content{display:flex;gap:20px;align-items:center;justify-content:space-between;flex-wrap:wrap}
    h1{
      font-size:28px;
      font-weight:700;
      background:linear-gradient(135deg,#06b6d4,#0891b2);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
    }
    .subtitle{color:var(--text-secondary);font-size:14px;margin-top:6px}
    
    /* Controls */
    .controls{display:flex;gap:12px;flex-wrap:wrap;margin-top:20px}
    input[type=text]{
      padding:12px 16px;
      border-radius:10px;
      border:1px solid var(--border);
      background:rgba(255,255,255,0.03);
      color:var(--text-primary);
      min-width:300px;
      flex:1;
      transition:all 0.3s ease;
      font-size:14px;
    }
    input[type=text]:focus{
      outline:none;
      border-color:var(--accent);
      background:rgba(255,255,255,0.06);
      box-shadow:0 0 0 3px rgba(6,182,212,0.1);
    }
    select{
      padding:12px 16px;
      border-radius:10px;
      border:1px solid var(--border);
      background:rgba(255,255,255,0.03);
      color:var(--text-primary);
      cursor:pointer;
      transition:all 0.3s ease;
      font-size:14px;
    }
    select:hover{background:rgba(255,255,255,0.06)}
    select:focus{outline:none;border-color:var(--accent)}
    
    /* Stats Bar */
    .stats{
      display:flex;
      gap:12px;
      margin-bottom:24px;
      flex-wrap:wrap;
    }
    .stat-card{
      flex:1;
      min-width:140px;
      background:linear-gradient(135deg,rgba(6,182,212,0.08),rgba(6,182,212,0.03));
      padding:16px;
      border-radius:12px;
      border:1px solid var(--border);
      text-align:center;
    }
    .stat-value{font-size:28px;font-weight:700;color:var(--accent)}
    .stat-label{font-size:13px;color:var(--text-secondary);margin-top:4px}
    
    /* Grid */
    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(320px,1fr));
      gap:20px;
      margin-bottom:40px;
    }
    .card{
      background:var(--card-bg);
      padding:20px;
      border-radius:14px;
      border:1px solid var(--border);
      transition:all 0.3s ease;
      cursor:pointer;
      position:relative;
      overflow:hidden;
    }
    .card::before{
      content:'';
      position:absolute;
      top:0;
      left:0;
      right:0;
      height:3px;
      background:linear-gradient(90deg,var(--accent),transparent);
      opacity:0;
      transition:opacity 0.3s ease;
    }
    .card:hover{
      transform:translateY(-4px);
      background:var(--card-hover);
      box-shadow:0 12px 28px var(--shadow);
      border-color:rgba(6,182,212,0.3);
    }
    .card:hover::before{opacity:1}
    
    .card-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px}
    .code-title{flex:1}
    .code{
      font-weight:700;
      color:var(--accent);
      font-size:15px;
      margin-bottom:4px;
    }
    .course-name{
      font-size:16px;
      font-weight:600;
      color:var(--text-primary);
      line-height:1.4;
    }
    
    .badge{
      padding:6px 12px;
      border-radius:20px;
      font-size:12px;
      font-weight:600;
      white-space:nowrap;
    }
    .badge-success{background:rgba(16,185,129,0.15);color:var(--success)}
    .badge-info{background:rgba(6,182,212,0.15);color:var(--accent)}
    
    .meta{
      display:flex;
      gap:16px;
      flex-wrap:wrap;
      font-size:13px;
      color:var(--text-secondary);
      margin:12px 0;
      padding:12px 0;
      border-top:1px solid var(--border);
      border-bottom:1px solid var(--border);
    }
    .meta-item{display:flex;align-items:center;gap:6px}
    .meta-icon{width:16px;height:16px}
    
    .desc{
      font-size:14px;
      color:var(--text-secondary);
      line-height:1.6;
      display:-webkit-box;
      -webkit-line-clamp:3;
      -webkit-box-orient:vertical;
      overflow:hidden;
      margin-bottom:12px;
    }
    
    .prereq{
      font-size:13px;
      padding:8px 12px;
      background:rgba(245,158,11,0.1);
      border-radius:8px;
      color:#fbbf24;
      border:1px solid rgba(245,158,11,0.2);
    }
    
    .card-footer{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-top:16px;
    }
    .btn{
      padding:10px 18px;
      border-radius:8px;
      border:none;
      background:var(--accent);
      color:#042029;
      cursor:pointer;
      font-weight:600;
      font-size:14px;
      transition:all 0.3s ease;
      text-decoration: none; /* Add this for <a> tags */
      display: inline-block; /* Ensures consistent styling for <a> tags */
    }
    .btn:hover{
      background:var(--accent-hover);
      transform:translateY(-2px);
      box-shadow:0 6px 16px rgba(6,182,212,0.3);
    }
    
    /* Modal */
    .modal-back{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.75);
      backdrop-filter:blur(8px);
      display:none;
      align-items:center;
      justify-content:center;
      padding:20px;
      z-index:1000;
      animation:fadeIn 0.3s ease;
    }
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}
    .modal{
      max-width:700px;
      width:100%;
      background:var(--card-bg);
      border-radius:16px;
      padding:28px;
      border:1px solid var(--border);
      box-shadow:0 20px 60px rgba(0,0,0,0.6);
      animation:slideUp 0.3s ease;
      max-height:90vh;
      overflow-y:auto;
    }
    @keyframes slideUp{from{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}
    .modal-header{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      margin-bottom:20px;
      padding-bottom:16px;
      border-bottom:2px solid var(--border);
    }
    .modal h2{
      font-size:22px;
      color:var(--accent);
      margin:0;
    }
    .close-btn{
      padding:8px 16px;
      border-radius:8px;
      border:1px solid var(--border);
      background:rgba(255,255,255,0.05);
      color:var(--text-secondary);
      cursor:pointer;
      transition:all 0.3s ease;
      font-size:14px;
    }
    .close-btn:hover{
      background:rgba(255,255,255,0.1);
      color:var(--text-primary);
    }
    .modal-content{line-height:1.8;color:var(--text-secondary)}
    .modal-meta{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
      gap:12px;
      margin:20px 0;
    }
    .modal-chip{
      padding:12px;
      background:rgba(255,255,255,0.04);
      border-radius:10px;
      text-align:center;
      font-size:13px;
      border:1px solid var(--border);
    }
    .modal-chip strong{color:var(--accent);display:block;margin-bottom:4px}
    
    .modal-links-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    footer{
      text-align:center;
      color:var(--text-secondary);
      font-size:14px;
      padding:24px;
      margin-top:40px;
      border-top:1px solid var(--border);
    }
    
    .empty-state{
      text-align:center;
      padding:60px 20px;
      color:var(--text-secondary);
    }
    .empty-icon{font-size:48px;margin-bottom:16px;opacity:0.5}
    
    
    @media (max-width:768px){
      .header-content{flex-direction:column;align-items:stretch}
      .controls{flex-direction:column}
      input[type=text]{min-width:100%;width:100%}
      .grid{grid-template-columns:1fr}
      h1{font-size:22px}
      .modal{padding:20px}
    }
  </style>


</head>
<body>
  <div class="container">
    <header>
      <div class="header-content">
        <div>
          <h1>IoT - Ø¥Ù†ØªØ±Ù†Øª Ø§Ù„Ø£Ø´ÙŠØ§Ø¡</h1>
          <div class="subtitle"> Ø§Ù„Ù…Ù‚Ø±Ø±Ø§Øª Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</div>
        </div>
      </div>
      <div class="controls">
        <input id="search" type="text" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø©ØŒ Ø±Ù‚Ù… Ø§Ù„Ù…Ù‚Ø±Ø±ØŒ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ù…Ù† Ø§Ù„ÙˆØµÙ..." />
        <select id="filterPra">
          <option value="all">ÙƒÙ„ Ø§Ù„Ù…Ù‚Ø±Ø±Ø§Øª</option>
          <option value="hasPra">Ù„Ù‡Ø§ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø³Ø§Ø¨Ù‚Ø©</option>
          <option value="noPra">Ø¨Ø¯ÙˆÙ† Ù…ØªØ·Ù„Ø¨Ø§Øª Ø³Ø§Ø¨Ù‚Ø©</option>
        </select>
        <select id="sortBy">
          <option value="code">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„ÙƒÙˆØ¯</option>
          <option value="name">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ø§Ø³Ù…</option>
          <option value="credit">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©</option>
        </select>
      </div>
    </header>

    <div class="stats">
      <div class="stat-card">
        <div class="stat-value" id="totalCourses">0</div>
        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù‚Ø±Ø±Ø§Øª</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="displayedCourses">0</div>
        <div class="stat-label">Ø§Ù„Ù…Ù‚Ø±Ø±Ø§Øª Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø©</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="totalCredits">0</div>
        <div class="stat-label">Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø³Ø§Ø¹Ø§Øª</div>
      </div>
    </div>

    <main>
      <div class="grid" id="cards"></div>
      <footer>
        <strong> Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ù‡ÙŠÙ„Ø§Øª</strong><br>
       
      </footer>
    </main>
  </div>

  <div class="modal-back" id="modalBack">
    <div class="modal">
      <div class="modal-header">
        <h2 id="mTitle"></h2>
        <button id="closeModal" class="close-btn">Ø¥ØºÙ„Ø§Ù‚</button>
      </div>
      <div class="modal-content">
        <div class="modal-meta" id="mMeta"></div>
        <div id="mDesc" style="margin-top:20px"></div>
        <div id="mLinks" style="margin-top:20px"></div>
      </div>
    </div>
  </div>


  <script>
    // --- UPDATED ---
    // Declare variables to hold data. 'courses' is now empty and will be filled by fetch.
    let courses = [];
    let courseLinks = {}; // This will be populated from the JSON file

    // Get DOM elements
    const cards = document.getElementById('cards');
    const search = document.getElementById('search');
    const filterPra = document.getElementById('filterPra');
    const sortBy = document.getElementById('sortBy');
    const totalCoursesEl = document.getElementById('totalCourses');
    const displayedCoursesEl = document.getElementById('displayedCourses');
    const totalCreditsEl = document.getElementById('totalCredits');

    function hasPra(c){return c.pra && c.pra !== '-' && c.pra !== ''}

    function updateStats(list){
      totalCoursesEl.textContent = courses.length; // 'courses' is the full list
      displayedCoursesEl.textContent = list.length; // 'list' is the filtered list
      const credits = list.reduce((sum, c) => sum + (c.credit > 0 ? c.credit : 0), 0);
      totalCreditsEl.textContent = credits;
    }

    function render(list){
      cards.innerHTML='';
      if(!list.length){
        cards.innerHTML=`
          <div class="empty-state">
            <div class="empty-icon">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</div>
            <h3>Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù‚Ø±Ø±Ø§Øª</h3>
            <p>Ø¬Ø±Ø¨ ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«</p>
          </div>
        `;
        return;
      }
      list.forEach(c=>{
        const div=document.createElement('div');
        div.className='card';
        div.onclick=()=> window.location.hash = c.code;
        
        const badgeHtml = hasPra(c) 
          ? '<span class="badge badge-info">Ù„Ù‡Ø§ Ù…ØªØ·Ù„Ø¨Ø§Øª</span>'
          : '<span class="badge badge-success">Ø¨Ø¯ÙˆÙ† Ù…ØªØ·Ù„Ø¨</span>';
        
        div.innerHTML=`
          <div class="card-header">
            <div class="code-title">
              <div class="code">${escapeHtml(c.code)}</div>
              <div class="course-name">${escapeHtml(c.name)}</div>
            </div>
            ${badgeHtml}
          </div>
          <div class="meta">
            <div class="meta-item"><span>${c.credit} Ø³Ø§Ø¹Ø© Ù…Ø¹ØªÙ…Ø¯Ø©</span></div>
            <div class="meta-item"><span>${c.practical >= 0 ? c.practical + ' Ø¹Ù…Ù„ÙŠ' : 'N/A'}</span></div>
            <div class="meta-item"><span>${c.th_hours >= 0 ? c.th_hours + ' Ù†Ø¸Ø±ÙŠ' : 'N/A'}</span></div>
          </div>
          <div class="desc">${escapeHtml(c.desc)}</div>
          ${hasPra(c) ? `<div class="prereq">Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª: ${escapeHtml(c.pra)}</div>` : ''}
          <div class="card-footer">
            <span style="font-size:13px;color:var(--text-secondary)">Ø§Ù†Ù‚Ø± Ù„Ù„ØªÙØ§ØµÙŠÙ„</span>
            <button class="btn" onclick="event.stopPropagation(); window.location.hash = '${c.code}'">Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„</button>
          </div>
        `;
        cards.appendChild(div);
      });
    }

    function escapeHtml(s){
      if (!s) return '';
      return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
    }

    function applyFilters(){
      // Check if courses data has loaded, if not, don't do anything
      if (courses.length === 0) {
        console.log("Waiting for courses to load...");
        return;
      }

      const q=search.value.trim().toLowerCase();
      let res = courses.filter(c=>{
        const concat = `${c.code} ${c.name} ${c.desc} ${c.pra}`.toLowerCase();
        return concat.includes(q);
      });
      
      if(filterPra.value==='hasPra') res = res.filter(hasPra);
      if(filterPra.value==='noPra') res = res.filter(c=>!hasPra(c));
      
      if(sortBy.value==='code') res.sort((a,b)=>a.code.localeCompare(b.code));
      else if(sortBy.value==='name') res.sort((a,b)=>a.name.localeCompare(b.name));
      else if(sortBy.value==='credit') res.sort((a,b)=>b.credit - a.credit);
      
      updateStats(res);
      render(res);
    }

    // Event listeners
    search.addEventListener('input', applyFilters);
    filterPra.addEventListener('change', applyFilters);
    sortBy.addEventListener('change', applyFilters);

    // Modal elements
    const modalBack = document.getElementById('modalBack');
    const mTitle = document.getElementById('mTitle');
    const mMeta = document.getElementById('mMeta');
    const mDesc = document.getElementById('mDesc');
    const mLinks = document.getElementById('mLinks');
    
    document.getElementById('closeModal').addEventListener('click', ()=> window.location.hash = '');
    modalBack.addEventListener('click', (e)=>{
      if(e.target === modalBack) window.location.hash = '';
    });

    /**
     * --- ğŸ’¡ NEW FUNCTION ğŸ’¡ ---
     * Toggles the visibility of the topics list in the modal
     */
    function toggleTopics(event) {
        event.preventDefault(); // Prevents the '#' from being added to the URL
        const topicsList = document.getElementById('modal-topics-list');
        if (topicsList) {
            const isHidden = topicsList.style.display === 'none';
            topicsList.style.display = isHidden ? 'block' : 'none';
        }
    }


    /**
     * --- ğŸ’¡ UPDATED FUNCTION ğŸ’¡ ---
     * Function to generate summary HTML from description
     */
    function createDescriptionSummary(desc) {
        const description = desc || '';
        const engNameMatch = description.match(/English Name:\s*([^.]+)\.?/);
        const engName = engNameMatch ? escapeHtml(engNameMatch[1].trim()) : '';

        let summaryHtml = '';

        if (engName) {
            summaryHtml += `<strong style="color: var(--text-primary); display: block; margin-bottom: 8px;">English Name:</strong> ${engName}`;
        }

        let topicsPart = description;
        if (engNameMatch) {
            topicsPart = description.substring(engNameMatch[0].length).trim();
        } else if (description.startsWith(engName) && engName) {
            topicsPart = '';
        }
        
        const topics = topicsPart.split(/[.,;]\s+/)
            .map(s => s.trim().replace(/[.,;]$/, ''))
            .filter(s => s.length > 3); 

        if (topics.length > 0) {
            // Updated to include the toggle link
            summaryHtml += `
                <div style="margin-top: 16px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center;">
                    <strong style="color: var(--text-primary); display: block;">Key Topics:</strong>
                    <a href="#" onclick="toggleTopics(event)" style="font-size: 13px; color: var(--accent); cursor: pointer; text-decoration: none;">
                        (Ø¥Ø¸Ù‡Ø§Ø± / Ø¥Ø®ÙØ§Ø¡)
                    </a>
                </div>
            `;
            
            // Added id="modal-topics-list", style="display: none;", dir="rtl", and text-align: right
            summaryHtml += `<ul id="modal-topics-list" style="padding-right: 20px; margin: 0; color: var(--text-secondary); display: none; dir: rtl; text-align: right;">`;
            topics.forEach(topic => {
                summaryHtml += `<li style="margin-bottom: 6px;">${escapeHtml(topic)}</li>`;
            });
            summaryHtml += `</ul>`;

        } else if (!engName) {
            summaryHtml = `<p>${escapeHtml(description)}</p>`;
        } else if (topicsPart.length > 0) {
            summaryHtml += `<p style="margin-top: 16px;">${escapeHtml(topicsPart)}</p>`;
        }
        
        return summaryHtml;
    }


    /**
     * openModal now only POPULATES content
     */
    function openModal(code){
      const c = courses.find(x=>x.code===code);
      if(!c) return;
      
      mTitle.textContent = `${c.code} â€” ${c.name}`;
      
      mMeta.innerHTML = `
        <div class="modal-chip"><strong>Ø§Ù„ÙƒÙˆØ¯</strong>${c.code}</div>
        <div class="modal-chip"><strong>Ø§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©</strong>${c.credit}</div>
        <div class="modal-chip"><strong>Ø§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù†Ø¸Ø±ÙŠØ©</strong>${c.th_hours >= 0 ? c.th_hours : 'N/A'}</div>
        <div class="modal-chip"><strong>Ø§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</strong>${c.practical >= 0 ? c.practical : 'N/A'}</div>
        <div class="modal-chip"><strong>Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</strong>${c.pra || '-'}</div>
      `;
      
      mDesc.innerHTML = createDescriptionSummary(c.desc);
      
      const links = courseLinks[c.code] || [];
      if(Array.isArray(links) && links.length){
        const buttonsHTML = links.map(l => {
          const name = escapeHtml(l.name || 'Ø±Ø§Ø¨Ø·');
          const href = escapeHtml(l.link || '#');
          return `<a href="${href}" target="_blank" rel="noopener noreferrer" class="btn">${name}</a>`;
        }).join('');
        
        mLinks.innerHTML = `
            <h4 style="margin-top: 20px; margin-bottom: 12px; color: var(--text-primary);">Ø±ÙˆØ§Ø¨Ø· Ù…Ù‡Ù…Ø©</h4>
            <div class="modal-links-container">
                ${buttonsHTML}
            </div>
        `;
      } else {
        mLinks.innerHTML = '';
      }
    }

    /**
     * This function controls modal visibility based on the URL hash
     */
    function handleHashChange() {
        const code = decodeURIComponent(window.location.hash.substring(1)); // Get hash, remove #, and decode
        
        // Wait for courses to load
        if (courses.length === 0) {
            console.log("Hash change ignored, courses not loaded yet.");
            return;
        }

        const course = courses.find(x => x.code === code);
        
        if (course) {
            openModal(course.code); // Populate the modal with content
            modalBack.style.display = 'flex'; // Show the modal
        } else {
            modalBack.style.display = 'none'; // Hide the modal
        }
    }

    window.addEventListener('hashchange', handleHashChange);

    /**
     * --- UPDATED: Main function to fetch BOTH data files and initialize ---
     */
    async function initializeApp() {
        try {
            // Fetch courses first
            const coursesResponse = await fetch('courses.json');
            if (!coursesResponse.ok) {
                throw new Error(`HTTP error! status: ${coursesResponse.status} (courses.json)`);
            }
            courses = await coursesResponse.json(); // Assign to the global 'courses' variable
            console.log("Courses loaded successfully.");

            // Then fetch course links
            const linksResponse = await fetch('course_links.json');
            if (!linksResponse.ok) {
                throw new Error(`HTTP error! status: ${linksResponse.status} (course_links.json)`);
            }
            courseLinks = await linksResponse.json();
            console.log("Course links loaded successfully.");

        } catch (error) {
            console.error("Could not load initial data:", error);
            // Display an error message to the user
            cards.innerHTML = `
              <div class="empty-state">
                <div class="empty-icon">âš ï¸</div>
                <h3>Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
                <p>Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù‚Ø±Ø±Ø§Øª. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø­Ù‚Ø§Ù‹.</p>
              </div>`;
        } finally {
            // These functions will now run after data is loaded (or has failed)
            // Initial render of the page
            applyFilters();
            
            // Check hash on initial page load
            handleHashChange();
        }
    }

    // Run the app initialization
    initializeApp();

  </script>
  </body>
</html>