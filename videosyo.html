<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ÿßŸÑŸÅŸäÿØŸäŸàŸáÿßÿ™</title>
  <style>
    :root{
      --bg-dark:#0a0e1a;
      --bg-medium:#0f1724;
      --card-bg:#131a2b;
      --card-hover:#182033;
      --text-primary:#e8f0f8;
      --text-secondary:#9ca3af;
      --accent:#06b6d4;
      --accent-hover:#0891b2;
      --border:rgba(255,255,255,0.06);
      --shadow:rgba(0,0,0,0.4);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:Almarai,'Segoe UI',Tahoma,sans-serif;
      background:linear-gradient(135deg,#0a0e1a 0%,#0f1724 50%,#071b2a 100%);
      color:var(--text-primary);
      min-height:100vh;
      line-height:1.6;
      padding:20px;
    }
    .container{max-width:1400px;margin:0 auto}
    
    header{
      background:linear-gradient(135deg,rgba(6,182,212,0.1),rgba(6,182,212,0.05));
      border-radius:16px;
      padding:24px;
      margin-bottom:24px;
      border:1px solid var(--border);
      backdrop-filter:blur(10px);
    }
    
    .header-top{
      display:flex;
      justify-content:space-between;
      align-items:center;
      flex-wrap:wrap;
      gap:16px;
      margin-bottom:16px;
    }
    
    h1{
      font-size:24px;
      font-weight:700;
      background:linear-gradient(135deg,#06b6d4,#0891b2);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
    }
    
    .back-btn{
      padding:10px 20px;
      border-radius:8px;
      border:1px solid var(--border);
      background:rgba(255,255,255,0.05);
      color:var(--text-primary);
      cursor:pointer;
      transition:all 0.3s ease;
      text-decoration:none;
      display:inline-block;
      font-size:14px;
    }
    .back-btn:hover{
      background:var(--accent);
      color:#042029;
      transform:translateY(-2px);
    }
    
    .course-info{
      font-size:14px;
      color:var(--text-secondary);
      padding:12px;
      background:rgba(255,255,255,0.03);
      border-radius:8px;
      margin-top:12px;
    }
    
    .search-box{
      margin-bottom:24px;
    }
    
    input[type=text]{
      width:100%;
      padding:14px 20px;
      border-radius:12px;
      border:1px solid var(--border);
      background:rgba(255,255,255,0.03);
      color:var(--text-primary);
      font-size:15px;
      transition:all 0.3s ease;
    }
    input[type=text]:focus{
      outline:none;
      border-color:var(--accent);
      background:rgba(255,255,255,0.06);
      box-shadow:0 0 0 3px rgba(6,182,212,0.1);
    }
    
    .videos-grid{
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(380px,1fr));
      gap:24px;
      margin-bottom:40px;
    }
    
    .video-card{
      background:var(--card-bg);
      border-radius:14px;
      border:1px solid var(--border);
      overflow:hidden;
      transition:all 0.3s ease;
      cursor:pointer;
    }
    .video-card:hover{
      transform:translateY(-4px);
      box-shadow:0 12px 28px var(--shadow);
      border-color:rgba(6,182,212,0.3);
    }
    
    .video-thumbnail{
      position:relative;
      width:100%;
      padding-top:56.25%;
      background:#000;
      overflow:hidden;
    }
    .video-thumbnail img{
      position:absolute;
      top:0;
      left:0;
      width:100%;
      height:100%;
      object-fit:cover;
    }
    .play-overlay{
      position:absolute;
      inset:0;
      background:rgba(0,0,0,0.3);
      display:flex;
      align-items:center;
      justify-content:center;
      opacity:0;
      transition:opacity 0.3s ease;
    }
    .video-card:hover .play-overlay{opacity:1}
    .play-icon{
      width:64px;
      height:64px;
      background:var(--accent);
      border-radius:50%;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:28px;
      color:#042029;
    }
    
    .video-info{
      padding:20px;
    }
    .video-title{
      font-size:16px;
      font-weight:600;
      color:var(--text-primary);
      margin-bottom:8px;
      line-height:1.4;
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }
    .video-desc{
      font-size:13px;
      color:var(--text-secondary);
      line-height:1.5;
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }
    
    .video-modal{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.9);
      backdrop-filter:blur(8px);
      display:none;
      align-items:center;
      justify-content:center;
      padding:20px;
      z-index:1000;
      animation:fadeIn 0.3s ease;
    }
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}
    
    .modal-content{
      max-width:1200px;
      width:100%;
      background:var(--card-bg);
      border-radius:16px;
      padding:24px;
      border:1px solid var(--border);
      box-shadow:0 20px 60px rgba(0,0,0,0.6);
      animation:slideUp 0.3s ease;
    }
    @keyframes slideUp{from{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}
    
    .modal-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:20px;
    }
    .modal-title{
      font-size:18px;
      color:var(--text-primary);
      font-weight:600;
    }
    .close-modal{
      padding:8px 16px;
      border-radius:8px;
      border:1px solid var(--border);
      background:rgba(255,255,255,0.05);
      color:var(--text-secondary);
      cursor:pointer;
      transition:all 0.3s ease;
      font-size:14px;
    }
    .close-modal:hover{
      background:rgba(255,255,255,0.1);
      color:var(--text-primary);
    }
    .video-player {
      position:relative;
      width:100%;
      padding-bottom:45.25%;
      background:#000;
      border-radius:12px;
      overflow:hidden;
    } 

    .video-player iframe {
      position:absolute;
      top:0;
      left:0;
      width:100%;
      height:100%;
      border:none;
      border-radius:12px;
    }
    
    .empty-state{
      text-align:center;
      padding:80px 20px;
      color:var(--text-secondary);
    }
    .empty-icon{font-size:64px;margin-bottom:16px;opacity:0.5}
    
    @media (max-width:768px){
      .videos-grid{grid-template-columns:1fr}
      h1{font-size:20px}
      .modal-content{padding:16px}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="header-top">
        <h1 id="pageTitle">ŸÅŸäÿØŸäŸàŸáÿßÿ™ ÿßŸÑŸÖŸÇÿ±ÿ±</h1>
        <a href="courses.html" class="back-btn">‚Üê ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÖŸÇÿ±ÿ±ÿßÿ™</a>
      </div>
      <div class="course-info" id="courseInfo"></div>
    </header>

    <div class="search-box">
      <input type="text" id="searchVideo" placeholder="ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ŸÅŸäÿØŸäŸà ŸÖÿπŸäŸÜ...">
    </div>

    <div class="videos-grid" id="videosGrid"></div>
  </div>

  <div class="video-modal" id="videoModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title" id="modalTitle"></div>
        <button class="close-modal" id="closeModal">ÿ•ÿ∫ŸÑÿßŸÇ</button>
      </div>
      <div class="video-player" id="videoPlayer"></div>
    </div>
  </div>

  <script>
    // This function will contain all the logic that depends on the video data.
    function initializeApp(courseVideos) {
      const urlParams = new URLSearchParams(window.location.search);
      const courseCode = urlParams.get('code') || '';
      const courseName = urlParams.get('name') || '';

      document.getElementById('pageTitle').textContent = `ŸÅŸäÿØŸäŸàŸáÿßÿ™ ${courseCode}`;
      document.getElementById('courseInfo').innerHTML = `
        <strong>${courseCode}</strong> ‚Äî ${courseName}
      `;

      const videos = courseVideos[courseCode] || [];

      document.getElementById('searchVideo').addEventListener('input', (e) => {
        const query = e.target.value.toLowerCase();
        const filtered = videos.filter(v => 
          v.title.toLowerCase().includes(query) || 
          v.desc.toLowerCase().includes(query)
        );
        renderVideos(filtered);
      });
      
      renderVideos(videos);
    }

    function extractVideoId(url) {
      if (!url) return null;
      const patterns = [
        /(?:youtube\.com\/watch\?v=)([a-zA-Z0-9_-]{11})/,
        /(?:youtu\.be\/)([a-zA-Z0-9_-]{11})/,
        /(?:youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,
        /(?:youtube\.com\/v\/)([a-zA-Z0-9_-]{11})/,
        /[?&]v=([a-zA-Z0-9_-]{11})/,
        /\/([a-zA-Z0-9_-]{11})(?:\?|&|$)/
      ];
      for (const pattern of patterns) {
        const match = url.match(pattern);
        if (match && match[1]) return match[1];
      }
      return null;
    }

    function getYoutubeThumbnail(url) {
      const videoId = extractVideoId(url);
      if (!videoId) {
        return 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1280 720"%3E%3Crect fill="%23131a2b" width="1280" height="720"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-family="Arial" font-size="60" fill="%239ca3af"%3Eüìπ YouTube Video%3C/text%3E%3C/svg%3E';
      }
      return `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
    }

    function renderVideos(filteredVideos) {
      const grid = document.getElementById('videosGrid');
      if (!filteredVideos || !filteredVideos.length) {
        grid.innerHTML = `
          <div class="empty-state" style="grid-column:1/-1">
            <div class="empty-icon">üìπ</div>
            <h3>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÅŸäÿØŸäŸàŸáÿßÿ™ ŸÖÿ™ÿßÿ≠ÿ©</h3>
            <p>ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÅŸäÿØŸäŸàŸáÿßÿ™ ŸÇÿ±Ÿäÿ®ÿßŸã</p>
          </div>
        `;
        return;
      }
      grid.innerHTML = filteredVideos.map(video => `
        <div class="video-card" onclick='openVideo(${JSON.stringify(video.link)}, ${JSON.stringify(video.title)})'>
          <div class="video-thumbnail">
            <img src="${getYoutubeThumbnail(video.link)}" alt="${escapeHtml(video.title)}">
            <div class="play-overlay"><div class="play-icon">‚ñ∂</div></div>
          </div>
          <div class="video-info">
            <div class="video-title">${escapeHtml(video.title)}</div>
            <div class="video-desc">${escapeHtml(video.desc)}</div>
          </div>
        </div>
      `).join('');
    }

    function escapeHtml(text) {
      return String(text).replace(/[&<>"']/g, (m) => ({'&': '&amp;','<': '&lt;','>': '&gt;','"': '&quot;',"'": '&#39;'}[m]));
    }

    function openVideo(videoLink, title) {
      const modal = document.getElementById('videoModal');
      const player = document.getElementById('videoPlayer');
      const modalTitle = document.getElementById('modalTitle');
      const videoId = extractVideoId(videoLink);
      if (!videoId) {
        alert('ÿ±ÿßÿ®ÿ∑ ÿßŸÑŸÅŸäÿØŸäŸà ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠');
        return;
      }
      modalTitle.textContent = title;
      modal.style.display = 'flex';
      setTimeout(() => {
        player.innerHTML = `<iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>`;
      }, 100);
    }

    function closeVideo() {
      const modal = document.getElementById('videoModal');
      const player = document.getElementById('videoPlayer');
      player.innerHTML = '';
      modal.style.display = 'none';
    }

    document.getElementById('closeModal').addEventListener('click', closeVideo);
    document.getElementById('videoModal').addEventListener('click', (e) => {
      if (e.target.id === 'videoModal') closeVideo();
    });

    // Fetch the data from the JSON file when the page loads
    document.addEventListener('DOMContentLoaded', () => {
      fetch('videos.json')
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok ' + response.statusText);
            }
            return response.json();
        })
        .then(data => {
          // Once data is loaded, run the main app logic
          initializeApp(data);
        })
        .catch(error => {
          console.error('Error loading video data:', error);
          document.getElementById('videosGrid').innerHTML = '<p style="color:red; text-align:center; grid-column:1/-1;">ŸÅÿ¥ŸÑ ÿ™ÿ≠ŸÖŸäŸÑ ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÅŸäÿØŸäŸàŸáÿßÿ™. ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜŸÉ ÿ™ÿ≥ÿ™ÿÆÿØŸÖ ÿÆÿßÿØŸÖ ŸÖÿ≠ŸÑŸä.</p>';
        });
    });
  </script>
</body>
</html>